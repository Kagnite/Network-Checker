# گزارش فنی: پیاده‌سازی ابزار بررسی شبکه (Network Checker)

## 1. مرور کلی

این مستند، گزارش پیاده‌سازی اسکریپت **Network Checker** است که به عنوان بخشی از آزمون ورودی آماده شده است.  
هدف این پروژه، نوشتن ابزاری بود که وضعیت **شبکه محلی** و **اتصال اینترنت** را بررسی کند.  

همچنین، یک قابلیت **مانیتورینگ مداوم (Continuous Monitoring)** برای رصد **نوسانات شبکه (Latency)** نیز به پروژه اضافه شده است.

---

## 2. اهداف و چالش‌های پیاده‌سازی

تمرکز اصلی من در این کد، **عدم وابستگی به کتابخانه‌های خارجی (Non-standard libraries)** و **عملکرد صحیح روی سیستم‌عامل‌های مختلف** بود.

### موارد پوشش داده شده:

- **سازگاری چند-لتفرمی (Cross-Platform):**  
  اسکریپت به صورت خودکار سیستم‌عامل را تشخیص داده و فرمان مناسب (مثل `ipconfig` در ویندوز یا فایل `/proc/net/route` در لینوکس) را اجرا می‌کند.

- **تست اتصال قابل اطمینان:**  
  به جای استفاده صرف از `ping` (که ممکن است بسته باشد)، از **TCP Socket** روی پورت‌های `53` و `443` استفاده شد تا اتصال واقعی به سرویس‌ها تست شود.

- **بررسی سلامت `HTTP`:**
  وضعیت پاسخ‌دهی سایت **"همراه آکادمی"** و زمان پاسخ آن اندازه‌گیری می‌شود.

- **قابلیت اضافه (Bonus):**  
  فلگ `--monitor` برای اجرای مداوم و شناسایی لحظاتی که شبکه دچار اختلال می‌شود.

---

## 3. نحوه اجرا

### بررسی استاندارد (پیش‌فرض)
اجرای یک‌بارِ تست و نمایش گزارش در ترمینال:

```bash
python3 network_checker.py
```
### خروجی JSON (برای پردازش‌های بعدی)

```bash
python3 network_checker.py --json
‍‍
```

### حالت مانیتورینگ (قابلیت اضافه)

این حالت برای دیباگ کردن **قطعی‌های لحظه‌ای شبکه** اضافه شده است:

```bash
python3 network_checker.py --monitor --interval 30

```

## 3. رویکرد فنی (Technical Approach)

### چالش دریافت اطلاعات شبکه
یکی از چالش‌های اصلی، دریافت **Gateway** و **Subnet** بدون نصب پکیج‌هایی مثل `netifaces` بود.

**راهکار:**  
من برای هر سیستم‌عامل (لینوکس، ویندوز، مک) یک تابع جداگانه نوشتم که خروجی دستورات سیستمی را با استفاده از **Regex** پردازش و اطلاعات مورد نیاز را استخراج می‌کند.

### منطق بررسی اتصال
برای تشخیص دقیق وضعیت اینترنت، از دو هدف متفاوت استفاده کردم:

- **Google DNS (8.8.8.8):**  
  برای اطمینان از متصل بودن اینترنت جهانی.

- **YouTube:**  
  برای تشخیص اینکه آیا اینترنت **"آزاد"** است یا **"فیلتر شده"**.

------------------------------------------------------------------------

## 4. توضیح فلگ‌ها

  فلگ                      توضیح
  ------------------------ -------------------------------------------
  `--json`                 خروجی JSON برای اسکریپت‌ها یا API
  `--monitor`              حالت مانیتورینگ مداوم
  `--interval <seconds>`   فاصله زمانی بین هر تست در حالت مانیتورینگ

------------------------------------------------------------------------

## 5. نمونه خروجی اجرا شده

    NetProbe v1.0 - Network Diagnostic Utility (Linux)
    ============================================================

    [1] Local Network Configuration
      • IP Address : 172.20.10.4 (Private)
      • Subnet Mask: 255.255.255.240 (/28)
      • Gateway    : 172.20.10.1

    [2] Service Connectivity
      Target                    Status     Latency    Details
      ------------------------- ---------- ---------- ---------------
      Google DNS                OK         0.21ms     Connected
      Restricted (YouTube)      FAIL       -          Refused (Service Down/Blocked)

    [3] Hamrah Academy Access
      • URL: https://hamrah.academy
      • Result: OK - HTTP 200 (4570.83ms)

    ============================================================
    FINAL DIAGNOSIS: PARTIAL INTERNET (Check details)
    ============================================================

------------------------------------------------------------------------

## 6. تحلیل نتایج (Analysis of the Result)

بر اساس لاگ بالا که روی سیستم من اجرا شد:

- **شبکه محلی:**  
  اسکریپت به درستی **IP خصوصی** و ساب‌نت `/28` را تشخیص داده است.

- **وضعیت فیلترینگ:**  
  اتصال به گوگل با تاخیر کم برقرار است، اما اتصال به یوتیوب **Refused** شده که نشان‌دهنده محدودیت روی شبکه است.

- **پرفورمنس:**  
  درخواست HTTP به سایت هدف با موفقیت انجام شد اما زمان پاسخ (~۴.۵ ثانیه) نشان‌دهنده **کندی شبکه** در لحظه تست است.

------------------------------------------------------------------------

## 7. نتیجه‌گیری و مسیر بهبود (Future Improvements)

این اسکریپت نیازهای صورت مسئله را برطرف می‌کند.  
با این حال، اگر قرار بود این ابزار در محیط **Production** استفاده شود، این تغییرات را اعمال می‌کردم:

- **استفاده از کتابخانه‌ای مثل `psutil`:**  
  برای مدیریت تمیزتر کارت‌های شبکه (به جای Regex روی متن).

- **پیاده‌سازی `asyncio`:**  
  برای چک کردن همزمان (**Parallel**) اتصال‌ها و افزایش سرعت اجرا.


------------------------------------------------------------------------